<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Archives Unleashed Datathon Cheat Sheet - The Archives Unleashed Project</title>
    <meta name="generator" content="Hugo 0.80.0" />

    
    <link rel="canonical" href="https://archivesunleashed.org/aut/datathon/">
    
    <meta name="author" content="The Archives Unleashed Project">
    

    <meta property="og:url" content="https://archivesunleashed.org/aut/datathon/">
    <meta property="og:title" content="The Archives Unleashed Project">
    <meta property="og:image" content="https://archivesunleashed.org/images/ArchivesUnleashedLogo.png">
    <meta name="apple-mobile-web-app-title" content="The Archives Unleashed Project">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://archivesunleashed.org/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://archivesunleashed.org/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://archivesunleashed.org/fonts/icon.eot');
        src: url('https://archivesunleashed.org/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://archivesunleashed.org/fonts/icon.woff')
               format('woff'),
             url('https://archivesunleashed.org/fonts/icon.ttf')
               format('truetype'),
             url('https://archivesunleashed.org/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://archivesunleashed.org/stylesheets/application.css">
    <link rel="stylesheet" href="https://archivesunleashed.org/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://archivesunleashed.org/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://archivesunleashed.org/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://archivesunleashed.org/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-grey palette-accent-red">




<div class="backdrop">
  <div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
  <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Archives Unleashed Datathon Cheat Sheet
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/unleasharchives" title="@unleasharchives on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/archivesunleashed" title="@archivesunleashed on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
  <div class="drawer">
    <nav aria-label="Navigation">
  <a href="https://archivesunleashed.org/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://archivesunleashed.org/images/ArchivesUnleashedLogo.png">
        </div>
      
      <div class="name">
        <strong>The Archives Unleashed Project </strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Home" href="https://archivesunleashed.org/">
	
	Home
</a>



  
</li>



<li>
  
    



<a  title="About the Project" href="https://archivesunleashed.org/about-project/">
	
	About the Project
</a>



  
</li>



<li>
  
    



<a  title="Getting Started" href="https://archivesunleashed.org/getting-started/">
	
	Getting Started
</a>



  
</li>



<li>
  
    



<a  title="Archives Unleashed Toolkit" href="https://archivesunleashed.org/aut/">
	
	Archives Unleashed Toolkit
</a>



  
</li>



<li>
  
    



<a  title="Archives Unleashed Cloud" href="https://archivesunleashed.org/cloud/">
	
	Archives Unleashed Cloud
</a>



  
</li>



<li>
  
    



<a  title="Archives Unleashed Notebooks" href="https://archivesunleashed.org/notebooks/">
	
	Archives Unleashed Notebooks
</a>



  
</li>



<li>
  
    



<a  title="Warclight" href="https://archivesunleashed.org/warclight/">
	
	Warclight
</a>



  
</li>



<li>
  
    



<a  title="Cohorts" href="https://archivesunleashed.org/cohorts/">
	
	Cohorts
</a>



  
</li>



<li>
  
    



<a  title="Get Involved" href="https://archivesunleashed.org/get-involved/">
	
	Get Involved
</a>



  
</li>



<li>
  
    



<a  title="Events" href="https://archivesunleashed.org/events/">
	
	Events
</a>



  
</li>



<li>
  
    



<a  title="Publications" href="https://archivesunleashed.org/publications/">
	
	Publications
</a>



  
</li>



<li>
  
    



<a  title="News (on Medium.com)" href="https://news.archivesunleashed.org">
	
	News (on Medium.com)
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">Get in touch</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/unleasharchives" target="_blank" title="@unleasharchives on Twitter">
              @unleasharchives on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/archivesunleashed" target="_blank" title="@archivesunleashed on GitHub">
              @archivesunleashed on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:archivesunleashed@gmail.com" title="Email of archivesunleashed@gmail.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

  </div>

  <article class="article">
    <div class="wrapper">
      <h1>Archives Unleashed Datathon Cheat Sheet </h1>

      <p>This guide is meant to be a quick reference guide for attendees at the Archives Unleashed <a href="https://archivesunleashed.org/events">datathons</a>. These are commonly-asked questions and options that attendees have used, and may be updated during events.</p>
<p>Screenshots are from Mac, as we don&rsquo;t have a Windows machine on our project team. Our apologies.</p>
<h2 id="finding-your-terminal">Finding Your Terminal</h2>
<p>While the <a href="https://archivesunleashed.org/cloud">Archives Unleashed Cloud</a> is easy to use in a web browser, the <a href="https://archivesunleashed.org/toolkit">Archives Unleashed Toolkit</a> requires the use of the command line.</p>
<p>On Mac OS, you can find the terminal by going to your &ldquo;Applications&rdquo; folder, then &ldquo;Utilities,&rdquo; then &ldquo;Terminal.&rdquo; See the screenshot below.</p>
<p><img src="https://archivesunleashed.org/images/Mac-OS-terminal.png" alt="Download"></p>
<p>On Windows, we recommend using PowerShell. You can launch this a few different ways, as outlined in this <a href="https://docs.microsoft.com/en-us/powershell/scripting/getting-started/starting-windows-powershell?view=powershell-6">guide from Microsoft</a>. We recommend clicking your &ldquo;Start&rdquo; button, typing &ldquo;PowerShell&rdquo;, and then clicking &ldquo;Windows PowerShell&rdquo;.</p>
<h2 id="connecting-to-a-virtual-machine">Connecting to a Virtual Machine</h2>
<p>Fortunately, we do most of our work at the datathon not on your own laptop, but on our <a href="https://www.computecanada.ca">Compute Canada</a> virtual machines!</p>
<p>The trick is connecting to them.</p>
<p>To do so, you need two things:</p>
<ul>
<li>a file known as a private key so that you can connect to the machine securely (at our hackathons this is generally known as <code>archives-hackathon.key</code>)</li>
<li>an IP address that lets your computer know <em>where</em> the machine you are joining is.</li>
</ul>
<p>We will give you the key at the datathon. We will also assign each team a virtual machine known by its IP. When you receive the key, we recommend saving it to your desktop for convenience during the event.</p>
<h2 id="setting-up-the-key">Setting Up the Key</h2>
<p>The first thing you need to do with your key is change the ownership. You need to open your terminal window and type the following. This will work on your desktop.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">chmod <span style="color:#ae81ff">600</span> ~/desktop/archives-hackathon.key
</code></pre></div><p>It might look a bit like this. No error mesage means that it worked!</p>
<p><img src="https://archivesunleashed.org/images/chmod.png" alt="Download"></p>
<h2 id="connecting">Connecting</h2>
<p>To connect, you need to modify the following command. Note that the IP address will change.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ssh -i ~/desktop/archives-hackathon.key ubuntu@206.167.180.200
</code></pre></div><p>The IP address is the number <code>206.167.180.200</code> above. If this works, you&rsquo;ll see something like this.</p>
<pre><code>The authenticity of host '18.236.128.116 (18.236.128.116)' can't be established.
ECDSA key fingerprint is SHA256:YjkquLPPmNlFqU4+E4cscSA9lqbHqg3D/8pBN0F+sRg.
Are you sure you want to continue connecting (yes/no)? yes
</code></pre><p>Type yes.</p>
<p>In the future, logging in will now just look like this.</p>
<p><img src="https://archivesunleashed.org/images/login.png" alt="Download"></p>
<h2 id="launching-the-toolkit-on-the-virtual-machine">Launching the Toolkit on the Virtual Machine</h2>
<p>Once you&rsquo;re on the machine, it will be preloaded with a number of collections - we will let you know the details about that in Slack.</p>
<p>Each of the VMs will be preloaded with:</p>
<ul>
<li>Apache Spark 2.3.2
<ul>
<li>Spark shell: <code>/home/ubuntu/spark/bin/spark-shell</code></li>
</ul>
</li>
<li>Python3, Python 2.7</li>
<li>Java 8</li>
<li>Ruby 2.3.1</li>
<li>jq</li>
<li>GNU Parallel</li>
</ul>
<p>Data will be located in <code>/mnt/data</code> in a series of subdirectories. For example, a collection might be found in <code>/mnt/data/sfu-ngos</code> for the SFU NGO collection.</p>
<p>A few other things to keep in mind:</p>
<ul>
<li>Each collection&rsquo;s directory will have a <code>warcs</code> directory containing all of it&rsquo;s ARCs/WARCs</li>
<li>Each collection&rsquo;s directory will have a <code>derivatives</code> directory containing the scholarly derivatives created on <a href="https://cloud.archivesunleashed.org">https://cloud.archivesunleashed.org</a>.</li>
<li>More info about those files can be found here: <a href="https://cloud.archivesunleashed.org/derivatives">https://cloud.archivesunleashed.org/derivatives</a>.</li>
</ul>
<p>To run Apache Spark shell with <code>aut</code> on each machine, run the following command:
<code>~/spark/bin/spark-shell --packages &quot;io.archivesunleashed:aut:0.17.0&quot;</code></p>
<p>In the course of your project, you might need to use additional flags. These should work well on each machine:
<code>~/spark/bin/spark-shell --packages &quot;io.archivesunleashed:aut:0.17.0&quot; --master local[*] --driver-memory 12G --conf spark.network.timeout=10000000</code></p>
<p>The <code>--master local[*]</code> refers to the number of cores that you are using. In general, the default works. But if you run into crashes, you may want to lower that number to <code>6</code>, i.e. <code>--master local[6]</code>.</p>
<p>The <code>--driver-memory 12G</code> refers to the amount of RAM you&rsquo;ve given the toolkit. On our VMs, please keep it at <code>12G</code>.</p>
<h2 id="what-to-do-with-aut">What to do with AUT?</h2>
<p>We recommend using the <a href="https://archivesunleashed.org/aut/">main documentation found here</a>. Take a look at the left hand column and see what you can do with WARCs.</p>
<p>Let&rsquo;s take a sample script, however. In the documentation <a href="https://archivesunleashed.org/aut/#collection-analytics">here</a>, see this script that lets you know what domains are found.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">import</span> io.archivesunleashed._
<span style="color:#66d9ef">import</span> io.archivesunleashed.matchbox._

<span style="color:#66d9ef">val</span> r <span style="color:#66d9ef">=</span>
<span style="color:#a6e22e">RecordLoader</span><span style="color:#f92672">.</span>loadArchives<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;example.arc.gz&#34;</span><span style="color:#f92672">,</span> sc<span style="color:#f92672">)</span>
<span style="color:#f92672">.</span>keepValidPages<span style="color:#f92672">()</span>
<span style="color:#f92672">.</span>map<span style="color:#f92672">(</span>r <span style="color:#66d9ef">=&gt;</span> <span style="color:#a6e22e">ExtractDomain</span><span style="color:#f92672">(</span>r<span style="color:#f92672">.</span>getUrl<span style="color:#f92672">))</span>
<span style="color:#f92672">.</span>countItems<span style="color:#f92672">()</span>
<span style="color:#f92672">.</span>take<span style="color:#f92672">(</span><span style="color:#ae81ff">10</span><span style="color:#f92672">)</span>
</code></pre></div><p>To run this on your machine, you just need to change the input. So let&rsquo;s change <code>example.arc.gz</code> to the directory that has your data. In this case, we&rsquo;ll use the fictional SFU NGO collection mentioned above.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala"><span style="color:#66d9ef">import</span> io.archivesunleashed._
<span style="color:#66d9ef">import</span> io.archivesunleashed.matchbox._

<span style="color:#66d9ef">val</span> r <span style="color:#66d9ef">=</span>
<span style="color:#a6e22e">RecordLoader</span><span style="color:#f92672">.</span>loadArchives<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/mnt/data/sfu-ngos/warcs/*.gz&#34;</span><span style="color:#f92672">,</span> sc<span style="color:#f92672">)</span>
<span style="color:#f92672">.</span>keepValidPages<span style="color:#f92672">()</span>
<span style="color:#f92672">.</span>map<span style="color:#f92672">(</span>r <span style="color:#66d9ef">=&gt;</span> <span style="color:#a6e22e">ExtractDomain</span><span style="color:#f92672">(</span>r<span style="color:#f92672">.</span>getUrl<span style="color:#f92672">))</span>
<span style="color:#f92672">.</span>countItems<span style="color:#f92672">()</span>
<span style="color:#f92672">.</span>take<span style="color:#f92672">(</span><span style="color:#ae81ff">10</span><span style="color:#f92672">)</span>
</code></pre></div><h2 id="copying-results-from-the-vm">Copying Results From the VM</h2>
<p>Finally, you may want to get results out of the VM so that you can use them locally.</p>
<p>Let&rsquo;s imagine you have a result file on your VM named <code>results.txt</code>. In this case, it is located in a directory called <code>output</code> off your home.</p>
<p>Here I <code>cd</code>, or change directory, into that directory and then type <code>pwd</code> to get the full path of it.</p>
<p><img src="https://archivesunleashed.org/images/pwd.png" alt="Download"></p>
<p>I now know that the file I want is located as:</p>
<pre><code>/home/ubuntu/output/results.txt
</code></pre><p>To get that file on my own machine, I open up a <strong>NEW</strong> terminal window. In this case, I decide I want to move it to my downloads folder.</p>
<p>I first type</p>
<pre><code>cd downloads
</code></pre><p>to move to my downloads folder. I then run <code>scp</code> to transfer the file. Note that it looks <em>very similar</em> to the command you used to connect to the file.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">scp -i ~/desktop/archives-hackathon.key ubuntu@18.236.128.116:/home/ubuntu/output/results.txt .
</code></pre></div><p>The trailing <code>.</code> is not a typo. This tells it to download in the directory you are in! See the screenshot below.</p>
<p><img src="https://archivesunleashed.org/images/download.png" alt="Download"></p>


      <aside class="copyright" role="note">
        
        CC-BY 2021 &vert;
        
        <a href="https://github.com/archivesunleashed/archivesunleashed.org" target="_blank">Site</a> built with
        <a href="https://www.gohugo.io" target="_blank">Hugo</a>
        using the
        <a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme
      </aside>

      <footer class="footer">
        

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://archivesunleashed.org/toronto/" title="Toronto Datathon">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Toronto Datathon
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://archivesunleashed.org/aut/resaw/" title="Digging into WARCs - Hands-On with the Archives Unleashed Toolkit">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Digging into WARCs - Hands-On with the Archives Unleashed Toolkit
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





      </footer>
    </div>
  </article>

  <div class="results" role="status" aria-live="polite">
    <div class="scrollable">
      <div class="wrapper">
        <div class="meta"></div>
        <div class="list"></div>
      </div>
    </div>
  </div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="https://archivesunleashed.org/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-2879197-28', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

